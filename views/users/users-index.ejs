<% include ../layout/header %>

<script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.1/css/bootstrap.css">
<link href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap4.min.css">
<link href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
<script>
  $(document).ready(function() {
    $('#usertable').DataTable( {
        "order": [[ 0, "asc" ]]
    } );
} );
</script>


<div class="container" style="margin-top: 10px">
<table id="usertable" class="table table-striped table-hover">
  <thead class="thead-dark">
    <tr>
      <th scope="col">#</th>
      <th scope="col">Name</th>
      <th scope="col">Chosen wishes</th>
      <th scope="col">Email</th>
    </tr>
  </thead>
  <tbody>
      <% var index = 0; %>
      <% users.forEach(function(user){ %>
          <% index++; %>
          <tr class="clickable-row" data-href="users/<%= user._id %>">
              <th scope="row"><%= index %></th>
              <td><%= user.username %></td>
              <td><%= user.wishes.length %></td>
              <td><%= user.email %></td>
          </tr>
     <% }); %>
</div>

<script>
    //make the whole row clickable
    $(document).ready(function($) {
    $(".clickable-row").click(function() {
        window.document.location = $(this).data("href");
    });
});
    
</script>

<% include ../layout/footer %>